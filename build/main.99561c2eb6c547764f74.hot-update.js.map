{"version":3,"file":"main.99561c2eb6c547764f74.hot-update.js","sources":["webpack:///./src/server.js"],"sourcesContent":["import express from \"express\";\nimport { matchRoutes } from \"react-router-config\";\nimport Routes from \"./Routes\";\nimport createStore from \"./helpers/creteStore\";\nimport renderer from \"./helpers/renderer\";\nconst server = express();\n\nserver\n  .disable(\"x-powered-by\")\n  .use(express.static(process.env.RAZZLE_PUBLIC_DIR))\n  .get(\"/*\", (req, res) => {\n    const store = createStore(req);\n    const promises = matchRoutes(Routes, req.path)\n      .map(({ route }) => {\n        return route.loadData ? route.loadData(store) : null;\n      })\n      .map(promise => {\n        if (promise) {\n          return new Promise((resolve, reject) => {\n            promise.then(resolve).catch(resolve);\n          });\n        }\n      });\n    Promise.all(promises).then(() => {\n      const context = {};\n      const content = renderer(req, store, context);\n      console.log(\"Context\", context);\n\n      if (context.url) {\n        res.redirect(301, context.url);\n      }\n      if (context.notFound) {\n        res.status(404);\n      }\n      res.send(content);\n    });\n  });\n\nexport default server;\n"],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;;;;A","sourceRoot":""}